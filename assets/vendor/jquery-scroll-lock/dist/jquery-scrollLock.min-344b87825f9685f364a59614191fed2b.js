/*!
 * Scroll Lock v3.1.3
 * https://github.com/MohammadYounes/jquery-scrollLock
 *
 * Copyright (c) 2017 Mohammad Younes
 * Licensed under GPL 3.
 */
(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})((function(t){"use strict"
var o,e=32,n=33,i=34,r=35,s=36,l=38,a=40,c=function(o,e){var n,i,r=e.scrollTop(),s=e.prop("scrollHeight"),l=e.prop("clientHeight"),a=o.originalEvent.wheelDelta||-1*o.originalEvent.detail||-1*o.originalEvent.deltaY,c=0
return"wheel"===o.type?(n=e.height()/t(window).height(),c=o.originalEvent.deltaY*n):this.options.touch&&"touchmove"===o.type&&(a=o.originalEvent.changedTouches[0].clientY-this.startClientY),{prevent:(i=a>0&&r+c<=0)||a<0&&r+c>=s-l,top:i,scrollTop:r,deltaY:c}},h=function(t,o){var c,h,p=o.scrollTop(),E={top:!1,bottom:!1}
return E.top=0===p&&(t.keyCode===n||t.keyCode===s||t.keyCode===l),E.top||(c=o.prop("scrollHeight"),h=o.prop("clientHeight"),E.bottom=c===p+h&&(t.keyCode===e||t.keyCode===i||t.keyCode===r||t.keyCode===a)),E},p=function(o,e){this.$element=o,this.options=t.extend({},p.DEFAULTS,this.$element.data(),e),this.enabled=!0,this.startClientY=0,this.options.unblock&&this.$element.on(p.CORE.wheelEventName+p.NAMESPACE,this.options.unblock,t.proxy(p.CORE.unblockHandler,this)),this.$element.on(p.CORE.wheelEventName+p.NAMESPACE,this.options.selector,t.proxy(p.CORE.handler,this)),this.options.touch&&(this.$element.on("touchstart"+p.NAMESPACE,this.options.selector,t.proxy(p.CORE.touchHandler,this)),this.$element.on("touchmove"+p.NAMESPACE,this.options.selector,t.proxy(p.CORE.handler,this)),this.options.unblock&&this.$element.on("touchmove"+p.NAMESPACE,this.options.unblock,t.proxy(p.CORE.unblockHandler,this))),this.options.keyboard&&(this.$element.attr("tabindex",this.options.keyboard.tabindex||0),this.$element.on("keydown"+p.NAMESPACE,this.options.selector,t.proxy(p.CORE.keyboardHandler,this)),this.options.unblock&&this.$element.on("keydown"+p.NAMESPACE,this.options.unblock,t.proxy(p.CORE.unblockHandler,this)))}
p.NAME="ScrollLock",p.VERSION="3.1.2",p.NAMESPACE=".scrollLock",p.ANIMATION_NAMESPACE=p.NAMESPACE+".effect",p.DEFAULTS={strict:!1,strictFn:function(t){return t.prop("scrollHeight")>t.prop("clientHeight")},selector:!1,animation:!1,touch:"ontouchstart"in window,keyboard:!1,unblock:!1},p.CORE={wheelEventName:"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",animationEventName:["webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","oanimationend","animationend"].join(p.ANIMATION_NAMESPACE+" ")+p.ANIMATION_NAMESPACE,unblockHandler:function(t){t.__currentTarget=t.currentTarget},handler:function(o){var e,n,i
this.enabled&&!o.ctrlKey&&(e=t(o.currentTarget),(!0!==this.options.strict||this.options.strictFn(e))&&(o.stopPropagation(),n=t.proxy(c,this)(o,e),o.__currentTarget&&(n.prevent&=t.proxy(c,this)(o,t(o.__currentTarget)).prevent),n.prevent&&(o.preventDefault(),n.deltaY&&e.scrollTop(n.scrollTop+n.deltaY),i=n.top?"top":"bottom",this.options.animation&&setTimeout(p.CORE.animationHandler.bind(this,e,i),0),e.trigger(t.Event(i+p.NAMESPACE)))))},touchHandler:function(t){this.startClientY=t.originalEvent.touches[0].clientY},animationHandler:function(t,o){var e=this.options.animation[o],n=this.options.animation.top+" "+this.options.animation.bottom
t.off(p.ANIMATION_NAMESPACE).removeClass(n).addClass(e).one(p.CORE.animationEventName,(function(){t.removeClass(e)}))},keyboardHandler:function(o){var e,n=t(o.currentTarget),i=(n.scrollTop(),h(o,n))
return o.__currentTarget&&(e=h(o,t(o.__currentTarget)),i.top&=e.top,i.bottom&=e.bottom),i.top?(n.trigger(t.Event("top"+p.NAMESPACE)),this.options.animation&&setTimeout(p.CORE.animationHandler.bind(this,n,"top"),0),!1):i.bottom?(n.trigger(t.Event("bottom"+p.NAMESPACE)),this.options.animation&&setTimeout(p.CORE.animationHandler.bind(this,n,"bottom"),0),!1):void 0}},p.prototype.toggleStrict=function(){this.options.strict=!this.options.strict},p.prototype.enable=function(){this.enabled=!0},p.prototype.disable=function(){this.enabled=!1},p.prototype.destroy=function(){this.disable(),this.$element.off(p.NAMESPACE),this.$element=null,this.options=null},o=t.fn.scrollLock,t.fn.scrollLock=function(o){return this.each((function(){var e=t(this),n="object"==typeof o&&o,i=e.data(p.NAME);(i||"destroy"!==o)&&(i||e.data(p.NAME,i=new p(e,n)),"string"==typeof o&&i[o]())}))},t.fn.scrollLock.defaults=p.DEFAULTS,t.fn.scrollLock.noConflict=function(){return t.fn.scrollLock=o,this}}))
